%nav.navbar.treegram
  %a.navbar-brand{:href => user_path(current_user)}
    %i.glyphicon.glyphicon-home
      Home
  %a.navbar-brand{:href => users_path }
    %i.glyphicon.glyphicon-heart
      Follows
  %a.navbar-brand{:href => new_user_photo_path(@user) }
    %i.glyphicon.glyphicon-cloud-upload
      Upload
  %a.navbar-brand.navbar-right.pd{:href => log_out_path }
    %i.glyphicon.glyphicon-log-out
      Logout

.row
  .col-sm-6.user_att
    %h2= @user.email
    - if @user.avatar_file_name
      = image_tag @user.avatar.url(:thumb)
%br/
%br/
%br/
%br/
%br/
%br/
%br/
%br/

.row
  -all_photos=[]
  - @users.each  do |user|
    -if current_user.following?(user) or user.id == current_user.id
      -user.photos.each do |photo|
        - all_photos << photo
  -all_photos.sort_by! {|photo| photo.created_at}
  -all_photos.reverse!
  -all_photos.each do |photo|
    -@user = User.find(photo.user_id)
    .well.col-sm-4
      -if @user.id == current_user.id
        = button_to 'Delete', user_photo_path(current_user.id, photo.id),class: "btn btn-danger", :method => :delete, :confirm => 'Are you sure?'
      #title= @user.email
      #title= photo.title
      = image_tag photo.image.url(:medium), :class => "uploaded_photo"
      = form_for @tag do |f|
        = f.hidden_field :photo_id, value: photo.id
        = f.collection_select :user_id, @users, :id, :email
        = f.submit "Tag User" ,:class => "tag-submit"
      - photo.tags.each do |tag|
        -@tagged = User.find(tag.user_id)
        = @tagged.email
      %br/
      .comments Comment Section
      %br/
      - photo.comments.order(created_at: :desc).each do |comment|
        -@commenter = User.find(comment.user_id)
        %span#comment= @commenter.email
        %strong#comment= comment.comment
        %br/
      = form_for @comment do |comment|
        = comment.text_field :comment
        = comment.hidden_field :comment_user_id, value: current_user.id
        = comment.hidden_field :photo_id, value: photo.id
        = comment.submit 'Add comment'
